description: >
  Job to create an annotation within Grafana.

executor: default

parameters:
  data:
    type: string
    default: ""
    description: "Optional. Grafana `data` field."
  grafana_cert:
    type: string
    description: "Required. Certificate to authenticate against Grafana api."
  grafana_url:
    type: string
    description: "Required. Granana hostname to which to post annotations."
  tags:
    type: string
    description: "Required. Grafana `tags` field. Comma separated list."
  what:
    type: string
    description: "Required. What the annotation is."
  when:
    type: string
    default: ""
    description: "Optional. Grafana `when` field. Epoch format."

steps:
  - checkout
  - create:
      data: << parameters.data >>
      grafana_cert: << parameters.grafana_cert >>
      grafana_url: << parameters.grafana_url >>
      tags: << parameters.tags >>
      what: << parameters.what >>
      when: << parameters.when >>
